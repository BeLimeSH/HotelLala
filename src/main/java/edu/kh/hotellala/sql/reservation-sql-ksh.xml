<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
	<comment>reservation-sql-ksh.xml</comment>

	<!-- 인원 수에 따른 객실 조회 -->
	<entry key="selectAvailableRoom">
	SELECT ROOM_TYPE, ROOM_RATES, ROOM_THUMBNAIL
	FROM ROOM_TB
	WHERE MAX_NUM >= ?
	</entry>

	<!-- 타입에 따른 객실 가격 조회 -->
	<entry key="selectRates">
	SELECT ROOM_RATES
	FROM ROOM_TB
	WHERE ROOM_TYPE = ?
	</entry>
	
	<!-- 결제 정보 삽입 -->
	<entry key="insertPayment">
	INSERT INTO PAYMENT VALUES(
    PAYMENT_NO_SEQ.NEXTVAL, DEFAULT, ?, 'Y', ?, ?, ?
	)
	</entry>
	
	<!-- 옵션 주문 정보 삽입 -->
	<entry key="insertOption">
	INSERT INTO OPTION_ORDER VALUES(
    OPTION_NO_SEQ.NEXTVAL, ?, ?, ?
	)
	</entry>
	
	<!-- 비어있는 객실 조회(예약 정보 삽입 시) -->
	<entry key="checkEmptyRoom">
	SELECT COUNT(*)
	FROM RESERVATION
	WHERE (CHECK_IN BETWEEN ? AND ?
	OR CHECK_OUT BETWEEN ? AND ?)
	AND ROOM_NO = ?
	</entry>
	
	<!-- 예약 정보 삽입 -->
	<entry key="insertReservation">
	INSERT INTO RESERVATION VALUES(
    ?, ?, ?, ?, ?, ?, ?, ?, ?, 'Y', ?
	)
	</entry>

</properties>
